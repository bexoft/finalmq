{
    "namespace":"hl7",
    "enums":[
    ],
    "structs":[

<% for (var key in hl7dictionary.fields) { 
    var field = hl7dictionary.fields[key] %>
        {"type":"<%- key %>","desc":"<%- field.desc -%>","fields":[ <% -%>
<% for (var i = 0; i < field.subfields.length; ++i) { 
    var subfield = field.subfields[i] %>
<% if (helper.isStruct(hl7dictionary.fields, subfield.datatype)) { -%>
            {"tid":"struct", "type":"<%- subfield.datatype %>", "name":"<%- subfield.name -%>"}<% -%>
<% } else { -%>
            {"tid":"string", "type":"", "name":"<%- subfield.name -%>"}<% -%>
<% } -%>
<% if (i != field.subfields.length - 1) { %>,<% } -%><% } %>
        ]},
<% } %>

<% for (var key in hl7dictionary.segments) { 
    var segment = hl7dictionary.segments[key] %>
        {"type":"<%- key %>","desc":"<%- segment.desc -%>","flags":["METASTRUCTFLAG_HL7_SEGMENT"],"fields":[ <% -%>
<% for (var i = 0; i < segment.fields.length; ++i) { 
    var field = segment.fields[i] %>
<% if (helper.isStruct(hl7dictionary.fields, field.datatype)) { -%>
            {"tid":"struct<% if (field.rep != 1) { %>[]<% } %>", "type":"<%- field.datatype %>", "name":"<%- field.name -%>"}<% -%>
<% } else { -%>
            {"tid":"string<% if (field.rep != 1) { %>[]<% } %>", "type":"", "name":"<%- field.name -%>"}<% -%>
<% } -%>
<% if (i != segment.fields.length - 1) { %>,<% } -%>
<% } %>
        ]},
<% } %>


<% for (var key in hl7dictionary.segGroups) { 
    var segGroup = hl7dictionary.segGroups[key] -%>
<% for (var i = 0; i < segGroup.length; ++i) { 
    var g = segGroup[i].child; -%>
        {"type":"<%- g.type %>","desc":"<%- g.desc.replaceAll('"') -%>","fields":[
<% for (var n = 0; n < g.children.length; ++n) {
    var child = g.children[n]; -%>
            {"tid":"struct<% if (child.max != 1) { %>[]<% } %>", "type":"<%- child.type %>", "name":"<%- child.name -%>"}<% -%>
<% if (n != g.children.length - 1) { %>,<% } -%>

<% } -%>
        ]},

<% }} %>


<%  var keysMessages = Object.keys(hl7dictionary.messages);
    for (var n = 0; n < keysMessages.length; ++n) { 
        var key = keysMessages[n];
        var message = hl7dictionary.messages[key] -%>
        {"type":"<%- key %>","desc":"<%- message.desc.replaceAll('"') -%>","fields":[ <% -%>
<% for (var i = 0; i < message.segments.segments.length; ++i) { 
    var segment = message.segments.segments[i] %>
            {"tid":"struct<% if (segment.max != 1) { %>[]<% } %>", "type":"<%- segment.type %>", "name":"<%- segment.name -%>"}<% -%>
<% if (i != message.segments.segments.length - 1) { %>,<% } -%>
<% } %>
        ]}<% -%>
<% if (n != keysMessages.length - 1) { %>,<% } %>
<% } %>

    ]
}


