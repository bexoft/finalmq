<html>                                                                          


<head>                                                                          

<script type="text/javascript" src="json2.js"></script>
<script type="text/javascript" src="fmq.js"></script>

                                                                                
<script type="text/javascript" >

//////////////////////////////////////////////////////////////////////


class TimerEntity extends FmqEntity
{
    timer_TimerEvent(correlationId, params)
    {
        var el = document.getElementById('testcontainer');
        el.innerHTML += '<tr><td width="320" align="left">' + params.time +'</td></tr>';
    }

    finalmq_disconnected(correlationId, params)
    {
        var el = document.getElementById('testcontainer');
        el.innerHTML += '<tr><td width="320" align="left">disconnected</td></tr>';

        setTimeout(function (_this, src) { _this.sendEvent(src, '', {}) }, 5000, this, src);
    }

    serverdisconnected()
    {
        document.getElementById('testcontainer').innerHTML += '<tr><td width="320" align="left">server disconnected</td></tr>';
    }

    serverconnected()
    {
        document.getElementById('testcontainer').innerHTML += '<tr><td width="320" align="left">server connected</td></tr>';
    }
}


var g_fmqSession = new FmqSession();
var g_fmqTimerService = null;



function entityReady()
{
}


function pageLoad()
{
    g_fmqSession.createSession(function() {
		g_fmqTimerService = g_fmqSession.createEntity('TimerEntity', TimerEntity);
    });
}

function pageUnload()
{
    g_entity.removeEntity(function() {});
}

                                                                           
</script>                                                                       
                                                                          
</head>

                                                               
<body>                                                                          

<body onload="pageLoad()" onunload="pageUnload()">

<table border="1" id="testcontainer">
</table>


</body>


</html>
       
